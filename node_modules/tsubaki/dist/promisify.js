"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.promisify = void 0;
const nodeVersion = parseInt(process.versions.node.split('.')[0], 10);
/**
 * Promisifies a function
 * @param {Function} fn The function to promisify
 * @returns {Function} Promise based version of the original function
 */
function promisify(fn) {
    return (...args) => new Promise((resolve, rej) => {
        fn(...args, (err, res) => {
            // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition
            if (err)
                return rej(err);
            return resolve(res);
        });
    });
}
exports.promisify = promisify;
// eslint-disable-next-line @typescript-eslint/no-require-imports, @typescript-eslint/no-var-requires
exports.default = (fn) => (nodeVersion >= 8 ? require('util').promisify(fn) : promisify(fn));
//# sourceMappingURL=promisify.js.map